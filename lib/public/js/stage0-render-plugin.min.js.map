{"version":3,"file":"stage0-render-plugin.min.js","sources":["../src/components.js","../src/index.js"],"sourcesContent":["import h from \"stage0\";\nimport { keyed } from \"stage0/keyed\";\n\nimport \"./node.sass\";\nimport \"./socket.sass\";\n\n/**\n * Base component\n * @param {*} scope\n */\nexport function BaseComponent(scope) {\n  const view = this.getView();\n\n  this.root = view.cloneNode(true);\n\n  const refCl = view.collect(this.root);\n\n  this.setRefs(refCl);\n  this.init(scope);\n}\n\nBaseComponent.prototype = {\n  getView: function() {\n    return h([\"<div></div>\"]);\n  },\n  init: function(scope) {\n    this.root.update = this.rootUpdate.bind(this);\n    this.root.update(scope);\n  },\n  setRefs: function(refCl) {\n    this.refs = refCl;\n  },\n  rootUpdate: function(_scope) {}\n};\n\nexport function extend(ChildClass, ParentClass) {\n  ChildClass.prototype = Object.assign({}, ParentClass.prototype, ChildClass.prototype);\n  ChildClass.prototype.constructor = ChildClass;\n}\n\n/**\n * Socket component\n * @param {*} socket\n * @param {*} type\n */\nexport function SocketComponent(io, type, node) {\n  this.type = type;\n  this.node = node;\n  this.name;\n  this.hint;\n  BaseComponent.call(this, io);\n}\n\nSocketComponent.prototype.init = function(io) {\n  BaseComponent.prototype.init.call(this, io.socket);\n  this.node.context.bindSocket(this.root, this.type, io);\n};\n\nSocketComponent.prototype.getView = function() {\n  return h([\"<div></div>\"]);\n};\n\nSocketComponent.prototype.rootUpdate = function(socket) {\n  if (this.name !== socket.name) this.root.className = \"socket \" + socket.name + \" \" + this.type;\n\n  if (this.name !== socket.name || this.hint !== socket.hint)\n    this.root.title = socket.name + \"\\\\n\" + (socket.hint ? socket.hint : \"\");\n\n  this.name = socket.name;\n  this.hint = socket.hint;\n};\n\nextend(SocketComponent, BaseComponent);\n\n/**\n * Control component\n * @param {*} control\n */\nexport function ControlComponent(control) {\n  this.control = control;\n  BaseComponent.call(this, control);\n}\n\nControlComponent.prototype.init = function(control) {\n  let ctx;\n  if (this.control.parent.context) ctx = this.control.parent.context;\n  else if (this.control.parent.node) ctx = this.control.parent.node.context;\n  ctx.bindControl(this.root, control);\n  BaseComponent.prototype.init.call(this, control);\n\n  this.root.addEventListener(\"mousedown\", e => {\n    e.stopPropagation();\n  });\n};\n\nControlComponent.prototype.getView = function() {\n  return h(['<div class=\"control\"></div>']);\n};\n\nControlComponent.prototype.rootUpdate = function(control) {\n  if (this.control.key !== control.key) {\n    while (this.root.firstChild) {\n      this.root.removeChild(this.root.firstChild);\n    }\n    this.root.appendChild(control.stage0Context.root);\n  }\n  this.control = control;\n};\n\nextend(ControlComponent, BaseComponent);\n\n/**\n * Input component\n * @param {*} input\n */\nexport function InputComponent(input, node) {\n  this.name = null;\n  this.node = node;\n  this.showControl = null;\n  BaseComponent.call(this, input);\n}\n\nInputComponent.prototype.getView = function() {\n  return h([\n    '<div class=\"input\"><span class=\"input-socket\" #socket></span><div class=\"input-title\" #inputTitle>#inputName</div><div class=\"input-control\" #controls></div></div>'\n  ]);\n};\n\nInputComponent.prototype.getSocketComponent = function(input) {\n  return new SocketComponent(input, \"input\", this.node);\n};\n\nInputComponent.prototype.getControlComponent = function(input) {\n  return new ControlComponent(input.control, input.node);\n};\n\nInputComponent.prototype.rootUpdate = function(input) {\n  const name = input.name;\n  const showControl = input.showControl();\n\n  if (this.showControl !== showControl) {\n    while (this.refs.controls.firstChild) {\n      this.refs.controls.removeChild(this.refs.controls.firstChild);\n    }\n    if (this.root.contains(this.refs.inputtitle)) {\n      this.root.removeChild(this.refs.inputtitle);\n    }\n    if (showControl) {\n      const controlComp = this.getControlComponent(input);\n      this.refs.controls.appendChild(controlComp.root);\n    } else {\n      this.root.appendChild(this.refs.inputtitle);\n      if (this.name !== name) {\n        this.name = this.refs.inputName.nodeValue = name;\n      }\n    }\n  }\n\n  if (!this.refs.socket.firstChild) {\n    const compSocket = this.getSocketComponent(input);\n    this.refs.socket.appendChild(compSocket.root);\n  }\n};\n\nextend(InputComponent, BaseComponent);\n\n/**\n * Output component\n * @param {*} output\n */\nexport function OutputComponent(output, node) {\n  this.name = null;\n  this.node = node;\n  BaseComponent.call(this, output);\n}\n\nOutputComponent.prototype.getView = function() {\n  return h([\n    '<div class=\"output\"><div class=\"output-title\" #outputTitle>#outputName</div><div #socket></div></div>'\n  ]);\n};\n\nOutputComponent.prototype.getSocketComponent = function(output) {\n  return new SocketComponent(output, \"output\", this.node);\n};\n\nOutputComponent.prototype.rootUpdate = function(output) {\n  let name = output.name;\n\n  if (this.name !== name) {\n    this.name = this.refs.outputName.nodeValue = name;\n  }\n\n  if (!this.refs.socket.firstChild) {\n    const compSocket = this.getSocketComponent(output);\n    this.refs.socket.appendChild(compSocket.root);\n  }\n};\n\nextend(OutputComponent, BaseComponent);\n\n/**\n * Node component\n * @param {*} item\n * @param {*} scope\n */\nexport function NodeComponent(scope) {\n  this.renderedInputs = [];\n  this.renderedOutputs = [];\n  this.renderedControls = [];\n\n  this.visibleInputs = undefined;\n  this.visibleOutputs = undefined;\n  this.visibleControls = undefined;\n\n  this.name = null;\n  this.selected = null;\n\n  this.visibleCollapsed = scope.node.data[\"collapsed\"] ? true : false;\n  this.renderedCollapsed = null;  \n\n  BaseComponent.call(this, scope);\n}\n\nNodeComponent.prototype.init = function(scope) {\n  BaseComponent.prototype.init.call(this, scope);\n\n  this.refs.collapse.addEventListener(\"mousedown\", e => {\n    e.stopPropagation();\n  });\n\n  this.refs.collapse.addEventListener(\"click\", _e => {\n    if (this.refs.collapse.classList.contains(\"closed\")) {\n      this.visibleCollapsed = false;\n    } else {\n      this.visibleCollapsed = true;\n    }\n\n    if(this.visibleCollapsed !== this.renderedCollapsed){\n      this.rootUpdate(scope);\n      scope.editor.view.updateConnections({ node: scope.node });\n    }\n  });\n\n  this.refs.collapse.ondblclick = function(e) {\n    e.stopPropagation();\n  };\n};\n\nNodeComponent.prototype.getView = function() {\n  return h([\n    '<div class=\"node\"><div class=\"collapse\" #collapse></div><div class=\"title\">#nodeName</div><div class=\"outputs\" #outputs></div><div class=\"controls\" #controls></div><div class=\"inputs\" #inputs></div></div>'\n  ]);\n};\n\nNodeComponent.prototype.getInputComponent = function(item, node) {\n  return new InputComponent(item, node);\n};\n\nNodeComponent.prototype.getOutputComponent = function(item, node) {\n  return new OutputComponent(item, node);\n};\n\nNodeComponent.prototype.getControlComponent = function(item, node) {\n  return new ControlComponent(item, node);\n};\n\nNodeComponent.prototype.rootUpdate = function(scope) {\n  const selected = scope.editor.selected.contains(scope.node);\n\n  if (this.name !== scope.node.name || this.selected !== selected) {\n    //this.root.classList.remove(this.name);\n    this.root.classList.remove(\"selected\");\n\n    //this.root.classList.add(scope.node.name);\n    if(selected)\n      this.root.classList.add(\"selected\");\n  }\n\n  this.selected = selected;\n\n  this.name = this.refs.nodeName.nodeValue = scope.node.label ? scope.node.label : scope.node.name;\n\n  if(this.visibleCollapsed !== this.renderedCollapsed){\n    if (this.visibleCollapsed) {\n      this.refs.collapse.classList.add(\"closed\");\n      this.root.classList.add(\"collapsed\");\n      this.root.insertBefore(this.refs.inputs, this.refs.collapse);\n    } else {\n      this.refs.collapse.classList.remove(\"closed\");\n      this.root.classList.remove(\"collapsed\");\n      this.root.appendChild(this.refs.inputs);\n    }\n    this.renderedCollapsed = this.visibleCollapsed;\n  }\n\n  this.visibleInputs = Array.from(scope.node.inputs.values()).slice();\n\n  keyed(\n    \"key\",\n    this.refs.inputs,\n    this.renderedInputs,\n    this.visibleInputs,\n    item => this.getInputComponent(item, scope.node).root,\n    (input, item) => {\n      input.update(item);\n    }\n  );\n\n  this.renderedInputs = this.visibleInputs.slice();\n\n  this.visibleOutputs = Array.from(scope.node.outputs.values()).slice();\n\n  keyed(\n    \"key\",\n    this.refs.outputs,\n    this.renderedOutputs,\n    this.visibleOutputs,\n    item => {\n      return this.getOutputComponent(item, scope.node).root;\n    },\n    (output, item) => {\n      output.update(item);\n    }\n  );\n\n  this.renderedOutputs = this.visibleOutputs.slice();\n\n  this.visibleControls = Array.from(scope.node.controls.values()).slice();\n\n  keyed(\n    \"key\",\n    this.refs.controls,\n    this.renderedControls,\n    this.visibleControls,\n    item => this.getControlComponent(item, scope.node).root,\n    (control, item) => {\n      control.update(item);\n    }\n  );\n\n  this.renderedControls = this.visibleControls.slice();\n};\n\nextend(NodeComponent, BaseComponent);\n","import h from \"stage0\";\n\nimport {\n  NodeComponent,\n  SocketComponent,\n  InputComponent,\n  OutputComponent,\n  ControlComponent,\n  extend,\n  BaseComponent\n} from \"./components\";\n\n/**\n * Control component\n * @param {*} control\n */\nfunction RootControlComponent(editor, { el, control, controlProps }) {\n  this.component = Object.assign({}, control.component, controlProps);\n\n  this.editor = editor;\n  this.el = el;\n\n  BaseComponent.call(this, control);\n  this.component.root = this.root;\n}\n\nRootControlComponent.prototype.getView = function() {\n  return h([this.component.template]);\n};\n\nRootControlComponent.prototype.init = function(_control) {\n  this.root.update = this.rootUpdate.bind(this);\n};\n\nRootControlComponent.prototype.rootUpdate = function(_control) {\n  this.component.methods.update.apply(this.component);\n};\n\nextend(RootControlComponent, BaseComponent);\n\nfunction createNode({ el, nodeProps, component }) {\n  const comp = component.component || new NodeComponent(nodeProps);\n  nodeProps.node.stage0Context = comp;\n  el.appendChild(comp.root);\n  return comp;\n}\n\nfunction createControl(editor, { el, control, controlProps }) {\n  const comp = new RootControlComponent(editor, { el, control, controlProps });\n\n  control.stage0Context = comp;\n\n  el.appendChild(comp.root);\n\n  comp.component.mounted();\n\n  return comp;\n}\n\nfunction install(editor, _params) {\n  editor.on(\"rendernode\", ({ el, node, component, bindSocket, bindControl }) => {\n    if (component.render && component.render !== \"stage0\") return;\n    const nodeProps = { ...component.props, node, editor, bindSocket, bindControl };\n    node.context = nodeProps;\n    node._stage0 = createNode({ el, nodeProps, component });\n    node.update = () => {\n      node.stage0Context.rootUpdate(nodeProps);\n    };\n  });\n\n  editor.on(\"rendercontrol\", ({ el, control }) => {\n    if (control.render && control.render !== \"stage0\") return;\n    let controlProps = {\n      ...control.props,\n      getData: control.getData.bind(control),\n      putData: control.putData.bind(control)\n    };\n    control._stage0 = createControl(editor, { el, control, controlProps });\n    control.update = () => {\n      control.stage0Context.rootUpdate(controlProps);\n    };\n  });\n\n  editor.on(\"connectioncreated connectionremoved\", connection => {\n    let inputContext = connection.input.node.context;\n    let outputContext = connection.output.node.context;\n    connection.output.node.stage0Context.rootUpdate(outputContext);\n    connection.input.node.stage0Context.rootUpdate(inputContext);\n  });\n\n  editor.on(\"nodeselected\", () => {\n    for (const key in editor.nodes) {\n      const editorNode = editor.nodes[key];\n      const context = editorNode.context;\n      editorNode.stage0Context.rootUpdate(context);\n    }\n  });\n}\n\nexport default {\n  name: \"stage0-render\",\n  install,\n  NodeComponent,\n  InputComponent,\n  OutputComponent,\n  ControlComponent,\n  RootControlComponent,\n  SocketComponent\n};\n"],"names":["BaseComponent","scope","view","this","getView","root","cloneNode","refCl","collect","setRefs","init","extend","ChildClass","ParentClass","prototype","Object","assign","constructor","SocketComponent","io","type","node","name","hint","call","ControlComponent","control","InputComponent","input","showControl","OutputComponent","output","NodeComponent","renderedInputs","renderedOutputs","renderedControls","visibleInputs","undefined","visibleOutputs","visibleControls","selected","visibleCollapsed","data","renderedCollapsed","h","update","rootUpdate","bind","refs","_scope","socket","context","bindSocket","className","title","ctx","parent","bindControl","addEventListener","stopPropagation","key","firstChild","removeChild","appendChild","stage0Context","getSocketComponent","getControlComponent","controls","contains","inputtitle","controlComp","inputName","nodeValue","compSocket","outputName","collapse","_this","classList","editor","updateConnections","ondblclick","e","getInputComponent","item","getOutputComponent","remove","add","nodeName","label","insertBefore","inputs","Array","from","values","slice","_this2","outputs","RootControlComponent","el","controlProps","component","template","_control","methods","apply","_params","on","render","nodeProps","comp","props","_stage0","getData","putData","mounted","inputContext","connection","outputContext","nodes","editorNode"],"mappings":"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"}